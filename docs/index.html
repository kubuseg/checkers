<!DOCTYPE html><html class="default" lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>warcaby</title><meta name="description" content="Documentation for warcaby"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script async src="assets/search.js" id="search-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os"</script><header class="tsd-page-toolbar">
<div class="tsd-toolbar-contents container">
<div class="table-cell" id="tsd-search" data-base=".">
<div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M15.7824 13.833L12.6666 10.7177C12.5259 10.5771 12.3353 10.499 12.1353 10.499H11.6259C12.4884 9.39596 13.001 8.00859 13.001 6.49937C13.001 2.90909 10.0914 0 6.50048 0C2.90959 0 0 2.90909 0 6.49937C0 10.0896 2.90959 12.9987 6.50048 12.9987C8.00996 12.9987 9.39756 12.4863 10.5008 11.6239V12.1332C10.5008 12.3332 10.5789 12.5238 10.7195 12.6644L13.8354 15.7797C14.1292 16.0734 14.6042 16.0734 14.8948 15.7797L15.7793 14.8954C16.0731 14.6017 16.0731 14.1267 15.7824 13.833ZM6.50048 10.499C4.29094 10.499 2.50018 8.71165 2.50018 6.49937C2.50018 4.29021 4.28781 2.49976 6.50048 2.49976C8.71001 2.49976 10.5008 4.28708 10.5008 6.49937C10.5008 8.70852 8.71314 10.499 6.50048 10.499Z" fill="var(--color-text)"></path></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div>
<div class="field">
<div id="tsd-toolbar-links"></div></div>
<ul class="results">
<li class="state loading">Preparing search index...</li>
<li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">warcaby</a></div>
<div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><rect x="1" y="3" width="14" height="2" fill="var(--color-text)"></rect><rect x="1" y="7" width="14" height="2" fill="var(--color-text)"></rect><rect x="1" y="11" width="14" height="2" fill="var(--color-text)"></rect></svg></a></div></div></header>
<div class="container container-main">
<div class="col-8 col-content">
<div class="tsd-page-title">
<h2>warcaby</h2></div>
<div class="tsd-panel tsd-typography">
<a href="#zaawansowane-programowanie-w-c" id="zaawansowane-programowanie-w-c" style="color: inherit; text-decoration: none;">
  <h1>Zaawansowane programowanie w C++</h1>
</a>
<p>Gra na przeglądarkę z użyciem WebAssembly</p>

<a href="#dokumentacja-wstępna-projektu" id="dokumentacja-wstępna-projektu" style="color: inherit; text-decoration: none;">
  <h4>Dokumentacja wstępna projektu</h4>
</a>
<p>Skład zespołu: Katarzyna Glaza, Jakub Nitkiewicz</p>
<p><a href="#_Toc138335219">Ogólny opis projektu	1</a></p>
<p><a href="#_Toc373063069">Temat projektu	1</a></p>
<p><a href="#_Toc1065200622">Zasady gry	1</a></p>
<p><a href="#_Toc750165419">Dodatkowe założenia	2</a></p>
<p><a href="#_Toc793952479">Technologie	2</a></p>
<p><a href="#_Toc2088189025">Zadania do wykonania	2</a></p>
<p><a href="#_Toc2045757164">Etap 1.	2</a></p>
<p><a href="#_Toc535475920">Etap 2.	3</a></p>
<p><a href="#_Toc1717203983">Planowane testy	3</a></p>

<a href="#ogólny-opis-projektu" id="ogólny-opis-projektu" style="color: inherit; text-decoration: none;">
  <h1>Ogólny opis projektu</h1>
</a>
<p>Zadanie polega na napisaniu gry w architekturze klient-serwer, klient powinien wykorzystywać jedynie przeglądarkę www. Dodatkowo klient powinien być zaimplementowany przy użyciu WebAssembly.</p>
<p>Gra powinna być przynajmniej dwuosobowa. Reguły gry - wikipedia lub inne źródło. Zespół może wybrać następujące opcje: Gra dwuosobowa, aplikacja dba o przestrzeganie zasad Gra jednoosobowa z komputerem, wtedy należy dostarczyć algorytm dla sztucznego gracza, wykorzystujący np. drzewo gry. Przy wyborze pierwszej opcji implementacja logiki gry nie musi znajdować się na serwerze.</p>
<p>WASM można generować m.in. na podstawie kodu w języku Rust albo C++.</p>

<a href="#temat-projektu" id="temat-projektu" style="color: inherit; text-decoration: none;">
  <h1>Temat projektu</h1>
</a>
<p>Grą dwuosobową, którą zaimplementujemy są warcaby w wariancie polskim. Zostaną one napisane w dwóch trybach: jako gra dwuosobowa oraz gra z komputerem. Dodatkowo, zaimplementowany zostanie algorytm wyboru ruchów komputera - algorytm minimax z cięciami 𝛼−𝛽 . </p>

<a href="#zasady-gry" id="zasady-gry" style="color: inherit; text-decoration: none;">
  <h1>Zasady gry</h1>
</a>
<p>Zasady gry, według których zaimplementowana zostanie gra są następujące:</p>
<p>Pionki graczy umieszczone są na ciemnych polach planszy o rozmiarze 10x10. Każdy gracz rozpoczyna grę z dwudziestoma pionkami swojego koloru (białymi lub czarnymi). Pionki ustawione są na planszy w ten sposób, że dwa środkowe rzędy planszy są wolne. Jako pierwszy ruch wykonuje gracz poruszający się białymi pionkami, ruchy obydwu graczy są naprzemienne. Bicie pionków jest obowiązkowe do końca (jeżeli gracz ma możliwość bicia więcej niż jednego pionka, musi wykonać maksymalną liczbę bić). Celem gry jest zbicie wszystkich pionków przeciwnika lub uniemożliwienie wykonania przez niego ruchu. Pionek może poruszać się po przekątnej na wolne pole i ma możliwość swobodnego przejścia o jedno pole. W przypadku bicia, pionek może poruszać się do przodu oraz do tyłu wykonując więcej skoków. Pionek, który dotrze na przeciwny koniec planszy zamienia się w damkę. Damka porusza się o dowolną liczbę pól do przodu lub do tyłu po przekątnej. Damka bijąc pionka przeskakuje na pole za zbitym pionkiem i może kontynuować bicie na tej samej lub prostopadłej linii. </p>

<a href="#dodatkowe-założenia" id="dodatkowe-założenia" style="color: inherit; text-decoration: none;">
  <h1>Dodatkowe założenia</h1>
</a>
<p>Poza zastosowaniem zasad zgodnymi z polską wersją gry, wprowadzone zostaną także następujące założenia:</p>
<p>Użytkownik przed rozpoczęciem gry może wybrać jeden z jej dwóch dostępnych trybów: grę z innym użytkownikiem oraz grę z komputerem. Przy wyborze gry dwuosobowej użytkownik jest pytany o swoją nazwę i oczekuje aż do pojawienia się drugiego gracza. Przed rozpoczęciem rozgrywki, będzie miał możliwość wyboru koloru pionków, przyjmiemy również uproszczenie, że każdy użytkownik ma umiejscowione swoje pionki na spodzie planszy, a zbite pionki zostają usunięte z planszy po wykonaniu bicia do końca. Dodatkowo, na ekranie będą znajdowały się liczniki zbitych pionków dla obydwu graczy.</p>

<a href="#technologie" id="technologie" style="color: inherit; text-decoration: none;">
  <h1>Technologie</h1>
</a>
<p>Gra zostanie zaimplementowana w języku Rust, w implementacji backendu wykorzystamy WebAssembly, a frontendu - JavaScript. Dodatkowo, skorzystamy z takich narzędzi jak:</p>
<ul>
<li>wasm-pack, który posłuży do budowania, testowania i publikowania WebAssembly generowanego przez Rust,</li>
<li>cargo, który jest menadżerem pakietów Rust,</li>
<li>npm, który jest menadżerem pakietów JavaScript,</li>
<li>rustfmt, który służy do formatowania kodu,</li>
<li>clippy, które służy do statycznej analizy kodu</li>
</ul>

<a href="#zadania-do-wykonania" id="zadania-do-wykonania" style="color: inherit; text-decoration: none;">
  <h1>Zadania do wykonania</h1>
</a>
<p>W realizacji praktycznej części naszego projektu wyróżniamy 2 podstawowe etapy.</p>
<p>W etapie 1. konfigurujemy wszystkie narzędzia i setupujemy środowisko, implementujemy frontend i backend aplikacji oraz zapewniamy przepływ informacji pomiędzy nimi, natomiast w etapie 2. implementujemy logikę gry w warcaby w obu trybach.</p>

<a href="#etap-1" id="etap-1" style="color: inherit; text-decoration: none;">
  <h2>Etap 1.</h2>
</a>
<ol>
<li>Skonfigurowanie zestawu narzędzi Rust do kompilacji do WebAssembly, podstawowe połączenie WebAssembly z JavaScript</li>
<li>Stworzenie GUI</li>
<li>Zapewnienie przepływu informacji pomiędzy wszystkimi komponentami</li>
</ol>

<a href="#etap-2" id="etap-2" style="color: inherit; text-decoration: none;">
  <h2>Etap 2.</h2>
</a>
<ol>
<li>Implementacja logiki gry w trybie dla dwóch osób</li>
<li>Implementacja algorytmu minimax z cięciem 𝛼−𝛽 do wersji trybu gry z komputerem</li>
</ol>

<a href="#planowane-testy" id="planowane-testy" style="color: inherit; text-decoration: none;">
  <h1>Planowane testy</h1>
</a>
<p>Zostaną przeprowadzone testy jednostkowe poprawności działania metod związanych z logiką gry, a także testy integracyjne sprawdzające czy wszystkie komponenty współdziałają ze sobą poprawnie. Do napisanie testów wykorzystane zostanie narzędzie wbudowane cargo-test oraz wasm-pack. Dodatkowo, w algorytmie minimax dostrojony zostanie parametr głębokości tak, aby komputer nie grał “zbyt dobrze”, a użytkownik miał szansę wygrania rozgrywanej z nim partii.</p>

<a href="#szkielet-aplikacji" id="szkielet-aplikacji" style="color: inherit; text-decoration: none;">
  <h1>Szkielet Aplikacji</h1>
</a>

<a href="#instrukcja-zbudowania-i-przetestowania-aplikacji" id="instrukcja-zbudowania-i-przetestowania-aplikacji" style="color: inherit; text-decoration: none;">
  <h2>Instrukcja zbudowania i przetestowania aplikacji:</h2>
</a>
<p><strong>Wymagania wstępne:</strong></p>
<p>Narzędzia:</p>
<ul>
<li>rustup</li>
<li>rustc</li>
<li>rustdoc</li>
<li>typedoc</li>
<li>cargo</li>
<li>cargo-generate</li>
<li>npm</li>
</ul>
<p>Pobranie ich jest opisane na stronie <a href="url">https://rustwasm.github.io/book/game-of-life/setup.html</a></p>
<p><strong>Następnie należy wykonać następujące kroki:</strong></p>
<ul>
<li>Sklonować projekt</li>
<li>W folderze rust-wasm-lib uruchomić <code>wasm-pack build</code></li>
<li>W głównym kalalogu projektu uruchomić <code>npm install</code></li>
<li>Następnie można przetestować rozwiązanie wpisując <code>npm start</code></li>
</ul>

<a href="#generowanie-dokumetacji" id="generowanie-dokumetacji" style="color: inherit; text-decoration: none;">
  <h2>Generowanie dokumetacji</h2>
</a>
<p>Dla rust:
<code>rustdoc rust-wasm-lib/src/lib.rs --crate-name docs</code></p>
<p>Dla typesript:
<code>npx typedoc src/index.tsx</code></p>

<a href="#dokomentacja-końcowa" id="dokomentacja-końcowa" style="color: inherit; text-decoration: none;">
  <h1>Dokomentacja Końcowa</h1>
</a>
<p>Schemat archutektury systemu
<img src="Images/ZPR_diagram_klas.drawio.png" alt="image info"></p>
<p>Z zakresu wyznaczonych wcześniej prac udało się osiągnąć:</p>
<ul>
<li><p><strong>Założenia etapu 1</strong> -
w które się wliczało Skonfigurowanie projektu, stworzenie prostego GUI i zapewniemie przepływu informacji pomiędzy Rustem a typesriptem</p>
</li>
<li><p><strong>Założenia etapu 2</strong> - które zakładały stworzenie logiki gry oraz implementacja gry w trybie dla dwóch graczy jak i z botem.</p>
</li>
</ul>
<p>Z zakresu wyznaczonych wcześniej prac nie udało się osiągnąć:</p>
<ul>
<li>Przy trybie dwuosobowym chcieliśmy by każdy gracz wpisywał swój nick i następnie w oddzielnych oknach przeglądarki każdy gracz widziałby swoje pionki na dole planszy i tak odbywała by się gra. Nie udało nam się tego nie stety zaimplementować i zostaliśmy na graniu w jednym oknie przeglądarki gdzie jeden gracz ma swoje pionki na górze planyszy a drugi na dole.</li>
<li>Licznik zbitych pionków - uznaliśmy, że jest to niepotrzebne.</li>
</ul>
<p>Napotkane przeszkody i rozwiązania na nie:</p>
<ul>
<li>Początkowo duża przeszkodą było używanie zmiennych z typesripta w kodzie rusta, ponieważ trzeba było konwertować <code>JsValue</code> na odpowiedi typ z rust. Problem ten rozwiązaliśmy dzięki użyciu biblioteki <code>serde_wasm_bindgen</code> która znacznie ułatwiła te zadanie do jednej funkcji.</li>
<li>Kolejnym problemem było użycie rusta w typesript, ponieważ bez zainicjalizowania biblioteki funkcje z rusta nie chciały działać. Rozwiązaliśmy ten problem używając dynamicznego importu biblioteki i inicjalizacji w <code>useEffect</code> dzięki czemu nie musieliśmy odpalać ponownie serwera po kompilacji kodu rusta.</li>
</ul>
<p>Zmiany w porównaniu do originalnego planu:</p>
<ul>
<li>Początkowo planowliśmy używać <code>JavaScript + react + rust</code> lecz zdecydowaliśmy się na <code>typescript + react + rust</code> dzięki czemu wszędzie były statyczne typy ułatwiało to współpracę z rust który umożliwia deklaracje definicji funkcji w typescript dzięki czemu później jest ich łatwiej używać.</li>
</ul>
<p>Dlaczego projekt zasługuje na dobrą ocene:</p>
<ul>
<li>Zostały wykonane wszystkie główne założenia projektu</li>
<li>Schludny interfecs graficzny i kod zgodny z dobrą praktyką programowania</li>
<li>Użycie w kodzie zalet poszczególnych jezyków i ich zaawansowanych mechanizmów np. dla reacta użycie &quot;Effect Hook&quot; co pozwalało na pisanie mniejszej ilości kodu, dla typescript użycie interfejsów co popawia czytelność kodu, dla rusta użycie obiektowości języka i specyfikowania czasu życia obiektów.</li>
<li>Użycie narzędzi do formatowania kodu</li>
</ul>
</div></div>
<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
<div class="tsd-navigation settings">
<details class="tsd-index-accordion"><summary class="tsd-accordion-summary">
<h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M4.93896 8.531L12 15.591L19.061 8.531L16.939 6.409L12 11.349L7.06098 6.409L4.93896 8.531Z" fill="var(--color-text)"></path></svg> Settings</h3></summary>
<div class="tsd-accordion-details">
<div class="tsd-filter-visibility">
<h4 class="uppercase">Member Visibility</h4><form>
<ul id="tsd-filter-options">
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li>
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-private" name="private"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Private</span></label></li>
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li>
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></form></div>
<div class="tsd-theme-toggle">
<h4 class="uppercase">Theme</h4><select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div>
<nav class="tsd-navigation primary">
<details class="tsd-index-accordion" open><summary class="tsd-accordion-summary">
<h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M4.93896 8.531L12 15.591L19.061 8.531L16.939 6.409L12 11.349L7.06098 6.409L4.93896 8.531Z" fill="var(--color-text)"></path></svg> Modules</h3></summary>
<div class="tsd-accordion-details">
<ul>
<li class="current selected"><a href="modules.html">warcaby</a>
<ul></ul></li></ul></div></details></nav>
<nav class="tsd-navigation secondary menu-sticky"></nav></div></div>
<div class="container tsd-generator">
<p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div>
<div class="overlay"></div><script src="assets/main.js"></script></body></html>